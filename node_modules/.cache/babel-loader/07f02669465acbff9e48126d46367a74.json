{"ast":null,"code":"import _toConsumableArray from\"/home/amit/Documents/amit per/amitgame/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/amit/Documents/amit per/amitgame/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import cloneDeep from\"lodash/cloneDeep\";import\"./tictactoe.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Block(_ref){var pos=_ref.pos,grid=_ref.grid,_onClick=_ref.onClick;return/*#__PURE__*/_jsx(\"div\",{className:\"block\",onClick:function onClick(){return _onClick(pos);},children:grid[pos]});}var GameStatus={Init:\"Init\",Playing:\"Playing\",End:\"End\"};var initCheck={rows:Array(3).fill(0),cols:Array(3).fill(0),diagonal:0,antiDiagonal:0,total:0};function TicTacToe(){var _useState=useState(Array(9).fill(null)),_useState2=_slicedToArray(_useState,2),grid=_useState2[0],setGrid=_useState2[1];var _useState3=useState(\"O\"),_useState4=_slicedToArray(_useState3,2),turn=_useState4[0],setTurn=_useState4[1];var _useState5=useState(GameStatus.Init),_useState6=_slicedToArray(_useState5,2),gameStatus=_useState6[0],setGameStatus=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),winner=_useState8[0],setWinner=_useState8[1];var check=useRef(null);var start=function start(){check.current=cloneDeep(initCheck);setGrid(Array(9).fill(null));setTurn(\"O\");setGameStatus(GameStatus.Playing);setWinner(null);};var move=function move(pos){if(grid[pos]===null){var newGrid=_toConsumableArray(grid);var _gameCheck=gameCheck(pos),_gameCheck2=_slicedToArray(_gameCheck,2),_gameStatus=_gameCheck2[0],_winner=_gameCheck2[1];newGrid[pos]=turn;setGrid(newGrid);setTurn(turn===\"O\"?\"X\":\"O\");setGameStatus(_gameStatus);setWinner(_winner);}};var gameCheck=function gameCheck(pos){var add=turn===\"O\"?1:-1;var row=Math.floor(pos/3);var col=pos%3;check.current.rows[row]+=add;check.current.cols[col]+=add;if([0,4,8].includes(pos))check.current.diagonal+=add;if([2,4,6].includes(pos))check.current.antiDiagonal+=add;check.current.total++;if(Math.abs(check.current.rows[row])===3||Math.abs(check.current.cols[col])===3||Math.abs(check.current.diagonal)===3||Math.abs(check.current.antiDiagonal)===3){return[GameStatus.End,turn];}if(check.current.total===9){return[GameStatus.End,null];}return[GameStatus.Playing,null];};return/*#__PURE__*/_jsxs(\"div\",{className:\"game\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Block,{pos:0,grid:grid,onClick:move}),/*#__PURE__*/_jsx(Block,{pos:1,grid:grid,onClick:move}),/*#__PURE__*/_jsx(Block,{pos:2,grid:grid,onClick:move})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Block,{pos:3,grid:grid,onClick:move}),/*#__PURE__*/_jsx(Block,{pos:4,grid:grid,onClick:move}),/*#__PURE__*/_jsx(Block,{pos:5,grid:grid,onClick:move})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Block,{pos:6,grid:grid,onClick:move}),/*#__PURE__*/_jsx(Block,{pos:7,grid:grid,onClick:move}),/*#__PURE__*/_jsx(Block,{pos:8,grid:grid,onClick:move})]})]}),gameStatus!==GameStatus.Playing&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay\"}),gameStatus===GameStatus.Init&&/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tic Tac Toe\"}),/*#__PURE__*/_jsx(\"div\",{className:\"start-btn\",onClick:start,children:\"Start\"})]}),gameStatus===GameStatus.End&&/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"div\",{children:winner?\"Winner: \".concat(winner):\"Draw\"}),/*#__PURE__*/_jsx(\"div\",{className:\"start-btn\",onClick:start,children:\"Start Over\"})]})]});}export default TicTacToe;","map":{"version":3,"sources":["/home/amit/Documents/amit per/amitgame/src/tiktak/tictactoe-v2.js"],"names":["React","useState","useRef","cloneDeep","Block","pos","grid","onClick","GameStatus","Init","Playing","End","initCheck","rows","Array","fill","cols","diagonal","antiDiagonal","total","TicTacToe","setGrid","turn","setTurn","gameStatus","setGameStatus","winner","setWinner","check","start","current","move","newGrid","gameCheck","add","row","Math","floor","col","includes","abs"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport \"./tictactoe.css\";\n\nfunction Block({ pos, grid, onClick }) {\n  return (\n    <div className=\"block\" onClick={() => onClick(pos)}>\n      {grid[pos]}\n    </div>\n  );\n}\n\nconst GameStatus = {\n  Init: \"Init\",\n  Playing: \"Playing\",\n  End: \"End\"\n};\n\nconst initCheck = {\n  rows: Array(3).fill(0),\n  cols: Array(3).fill(0),\n  diagonal: 0,\n  antiDiagonal: 0,\n  total: 0\n};\n\nfunction TicTacToe() {\n  const [grid, setGrid] = useState(Array(9).fill(null));\n  const [turn, setTurn] = useState(\"O\");\n  const [gameStatus, setGameStatus] = useState(GameStatus.Init);\n  const [winner, setWinner] = useState(null);\n  const check = useRef(null);\n\n  const start = () => {\n    check.current = cloneDeep(initCheck);\n    setGrid(Array(9).fill(null));\n    setTurn(\"O\");\n    setGameStatus(GameStatus.Playing);\n    setWinner(null);\n  };\n\n  const move = pos => {\n    if (grid[pos] === null) {\n      const newGrid = [...grid];\n      const [gameStatus, winner] = gameCheck(pos);\n\n      newGrid[pos] = turn;\n      setGrid(newGrid);\n      setTurn(turn === \"O\" ? \"X\" : \"O\");\n      setGameStatus(gameStatus);\n      setWinner(winner);\n    }\n  };\n\n  const gameCheck = pos => {\n    const add = turn === \"O\" ? 1 : -1;\n    const row = Math.floor(pos / 3);\n    const col = pos % 3;\n\n    check.current.rows[row] += add;\n    check.current.cols[col] += add;\n    if ([0, 4, 8].includes(pos)) check.current.diagonal += add;\n    if ([2, 4, 6].includes(pos)) check.current.antiDiagonal += add;\n    check.current.total++;\n\n    if (\n      Math.abs(check.current.rows[row]) === 3 ||\n      Math.abs(check.current.cols[col]) === 3 ||\n      Math.abs(check.current.diagonal) === 3 ||\n      Math.abs(check.current.antiDiagonal) === 3\n    ) {\n      return [GameStatus.End, turn];\n    }\n\n    if (check.current.total === 9) {\n      return [GameStatus.End, null];\n    }\n\n    return [GameStatus.Playing, null];\n  };\n\n  return (\n    <div className=\"game\">\n      <div className=\"box\">\n        <div className=\"row\">\n          <Block pos={0} grid={grid} onClick={move} />\n          <Block pos={1} grid={grid} onClick={move} />\n          <Block pos={2} grid={grid} onClick={move} />\n        </div>\n        <div className=\"row\">\n          <Block pos={3} grid={grid} onClick={move} />\n          <Block pos={4} grid={grid} onClick={move} />\n          <Block pos={5} grid={grid} onClick={move} />\n        </div>\n        <div className=\"row\">\n          <Block pos={6} grid={grid} onClick={move} />\n          <Block pos={7} grid={grid} onClick={move} />\n          <Block pos={8} grid={grid} onClick={move} />\n        </div>\n      </div>\n      {gameStatus !== GameStatus.Playing && <div className=\"overlay\" />}\n      {gameStatus === GameStatus.Init && (\n        <div className=\"panel\">\n          <div>Tic Tac Toe</div>\n          <div className=\"start-btn\" onClick={start}>\n            Start\n          </div>\n        </div>\n      )}\n      {gameStatus === GameStatus.End && (\n        <div className=\"panel\">\n          <div>{winner ? `Winner: ${winner}` : \"Draw\"}</div>\n          <div className=\"start-btn\" onClick={start}>\n            Start Over\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default TicTacToe;\n"]},"metadata":{},"sourceType":"module"}